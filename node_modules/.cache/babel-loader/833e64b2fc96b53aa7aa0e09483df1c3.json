{"ast":null,"code":"var _jsxFileName = \"/Users/ivan/Desktop/web/hero_admin_panel_template/src/components/heroesList/HeroesList.js\",\n    _s = $RefreshSig$();\n\nimport { useHttp } from '../../hooks/http.hook';\nimport { useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\nimport { heroesFetching, heroesFetched, heroesFetchingError, heroDeleted } from '../../actions';\nimport HeroesListItem from \"../heroesListItem/HeroesListItem\";\nimport Spinner from '../spinner/Spinner'; // Задача для этого компонента:\n// При клике на \"крестик\" идет удаление персонажа из общего состояния\n// Усложненная задача:\n// Удаление идет и с json файла при помощи метода DELETE\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst HeroesList = () => {\n  _s();\n\n  const {\n    heroes,\n    heroesLoadingStatus\n  } = useSelector(state => state);\n  const dispatch = useDispatch();\n  const {\n    request\n  } = useHttp();\n  useEffect(() => {\n    dispatch(heroesFetching());\n    request(\"http://localhost:3001/heroes\").then(data => dispatch(heroesFetched(data))).catch(() => dispatch(heroesFetchingError())); // eslint-disable-next-line\n  }, []);\n  const onDelete = useCallback(id => {\n    //dispatch(heroDeleted(id))\n    request(`http://localhost:3001/heroes/${id}`, 'DELETE').then(data => console.log(data, 'deleted')).then(dispatch(heroDeleted(id))).catch(err => console.log(err));\n  }, [request]);\n\n  if (heroesLoadingStatus === \"loading\") {\n    return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 16\n    }, this);\n  } else if (heroesLoadingStatus === \"error\") {\n    return /*#__PURE__*/_jsxDEV(\"h5\", {\n      className: \"text-center mt-5\",\n      children: \"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 16\n    }, this);\n  }\n\n  const renderHeroesList = arr => {\n    if (arr.length === 0) {\n      return /*#__PURE__*/_jsxDEV(CSSTransition, {\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"text-center mt-5\",\n          children: \"\\u0413\\u0435\\u0440\\u043E\\u0435\\u0432 \\u043F\\u043E\\u043A\\u0430 \\u043D\\u0435\\u0442\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this);\n    }\n\n    return arr.map(({\n      id,\n      ...props\n    }) => {\n      return /*#__PURE__*/_jsxDEV(HeroesListItem, { ...props,\n        onDelete: () => onDelete(id)\n      }, id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 20\n      }, this);\n    });\n  };\n\n  const elements = renderHeroesList(heroes);\n  return /*#__PURE__*/_jsxDEV(TransitionGroup, {\n    component: \"ul\",\n    children: elements\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n};\n\n_s(HeroesList, \"hDecbTfy8Nv6uwHx3KhKbQ4m9vI=\", false, function () {\n  return [useSelector, useDispatch, useHttp];\n});\n\n_c = HeroesList;\nexport default HeroesList;\n\nvar _c;\n\n$RefreshReg$(_c, \"HeroesList\");","map":{"version":3,"sources":["/Users/ivan/Desktop/web/hero_admin_panel_template/src/components/heroesList/HeroesList.js"],"names":["useHttp","useCallback","useEffect","useDispatch","useSelector","CSSTransition","TransitionGroup","heroesFetching","heroesFetched","heroesFetchingError","heroDeleted","HeroesListItem","Spinner","HeroesList","heroes","heroesLoadingStatus","state","dispatch","request","then","data","catch","onDelete","id","console","log","err","renderHeroesList","arr","length","map","props","elements"],"mappings":";;;AAAA,SAAQA,OAAR,QAAsB,uBAAtB;AACA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,OAAvC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,aAAT,EAAwBC,eAAxB,QAA+C,wBAA/C;AAEA,SAASC,cAAT,EAAyBC,aAAzB,EAAwCC,mBAAxC,EAA6DC,WAA7D,QAAgF,eAAhF;AACA,OAAOC,cAAP,MAA2B,kCAA3B;AACA,OAAOC,OAAP,MAAoB,oBAApB,C,CAEA;AACA;AACA;AACA;;;;AAEA,MAAMC,UAAU,GAAG,MAAM;AAAA;;AACrB,QAAM;AAACC,IAAAA,MAAD;AAASC,IAAAA;AAAT,MAAgCX,WAAW,CAACY,KAAK,IAAIA,KAAV,CAAjD;AACA,QAAMC,QAAQ,GAAGd,WAAW,EAA5B;AACA,QAAM;AAACe,IAAAA;AAAD,MAAYlB,OAAO,EAAzB;AAEAE,EAAAA,SAAS,CAAC,MAAM;AACZe,IAAAA,QAAQ,CAACV,cAAc,EAAf,CAAR;AACAW,IAAAA,OAAO,CAAC,8BAAD,CAAP,CACKC,IADL,CACUC,IAAI,IAAIH,QAAQ,CAACT,aAAa,CAACY,IAAD,CAAd,CAD1B,EAEKC,KAFL,CAEW,MAAMJ,QAAQ,CAACR,mBAAmB,EAApB,CAFzB,EAFY,CAMZ;AACH,GAPQ,EAON,EAPM,CAAT;AASA,QAAMa,QAAQ,GAAGrB,WAAW,CAAEsB,EAAD,IAAQ;AACjC;AACAL,IAAAA,OAAO,CAAE,gCAA+BK,EAAG,EAApC,EAAuC,QAAvC,CAAP,CACKJ,IADL,CACUC,IAAI,IAAII,OAAO,CAACC,GAAR,CAAYL,IAAZ,EAAkB,SAAlB,CADlB,EAEKD,IAFL,CAEUF,QAAQ,CAACP,WAAW,CAACa,EAAD,CAAZ,CAFlB,EAGKF,KAHL,CAGWK,GAAG,IAAIF,OAAO,CAACC,GAAR,CAAYC,GAAZ,CAHlB;AAIH,GAN2B,EAMzB,CAACR,OAAD,CANyB,CAA5B;;AAQA,MAAIH,mBAAmB,KAAK,SAA5B,EAAuC;AACnC,wBAAO,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,YAAP;AACH,GAFD,MAEO,IAAIA,mBAAmB,KAAK,OAA5B,EAAqC;AACxC,wBAAO;AAAI,MAAA,SAAS,EAAC,kBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;;AAED,QAAMY,gBAAgB,GAAIC,GAAD,IAAS;AAC9B,QAAIA,GAAG,CAACC,MAAJ,KAAe,CAAnB,EAAsB;AAClB,0BACI,QAAC,aAAD;AAAA,+BAEI;AAAI,UAAA,SAAS,EAAC,kBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,cADJ;AAMH;;AAED,WAAOD,GAAG,CAACE,GAAJ,CAAQ,CAAC;AAACP,MAAAA,EAAD;AAAK,SAAGQ;AAAR,KAAD,KAAoB;AAC/B,0BAAO,QAAC,cAAD,OAA6BA,KAA7B;AAAoC,QAAA,QAAQ,EAAE,MAAMT,QAAQ,CAACC,EAAD;AAA5D,SAAqBA,EAArB;AAAA;AAAA;AAAA;AAAA,cAAP;AACH,KAFM,CAAP;AAGH,GAbD;;AAcA,QAAMS,QAAQ,GAAGL,gBAAgB,CAACb,MAAD,CAAjC;AACA,sBACI,QAAC,eAAD;AAAiB,IAAA,SAAS,EAAC,IAA3B;AAAA,cACKkB;AADL;AAAA;AAAA;AAAA;AAAA,UADJ;AAKH,CAhDD;;GAAMnB,U;UACoCT,W,EACrBD,W,EACCH,O;;;KAHhBa,U;AAkDN,eAAeA,UAAf","sourcesContent":["import {useHttp} from '../../hooks/http.hook';\nimport { useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\n\nimport { heroesFetching, heroesFetched, heroesFetchingError, heroDeleted } from '../../actions';\nimport HeroesListItem from \"../heroesListItem/HeroesListItem\";\nimport Spinner from '../spinner/Spinner';\n\n// Задача для этого компонента:\n// При клике на \"крестик\" идет удаление персонажа из общего состояния\n// Усложненная задача:\n// Удаление идет и с json файла при помощи метода DELETE\n\nconst HeroesList = () => {\n    const {heroes, heroesLoadingStatus} = useSelector(state => state);\n    const dispatch = useDispatch();\n    const {request} = useHttp();\n\n    useEffect(() => {\n        dispatch(heroesFetching());\n        request(\"http://localhost:3001/heroes\")\n            .then(data => dispatch(heroesFetched(data)))\n            .catch(() => dispatch(heroesFetchingError()))\n\n        // eslint-disable-next-line\n    }, []);\n\n    const onDelete = useCallback((id) => {\n        //dispatch(heroDeleted(id))\n        request(`http://localhost:3001/heroes/${id}`, 'DELETE')\n            .then(data => console.log(data, 'deleted'))\n            .then(dispatch(heroDeleted(id)))\n            .catch(err => console.log(err))\n    }, [request])\n\n    if (heroesLoadingStatus === \"loading\") {\n        return <Spinner/>;\n    } else if (heroesLoadingStatus === \"error\") {\n        return <h5 className=\"text-center mt-5\">Ошибка загрузки</h5>\n    }\n\n    const renderHeroesList = (arr) => {\n        if (arr.length === 0) {\n            return (\n                <CSSTransition\n                    >\n                    <h5 className=\"text-center mt-5\">Героев пока нет</h5>\n                </CSSTransition>\n            )\n        }\n\n        return arr.map(({id, ...props}) => {\n            return <HeroesListItem key={id} {...props} onDelete={() => onDelete(id)}/>\n        })\n    }\n    const elements = renderHeroesList(heroes);\n    return (\n        <TransitionGroup component='ul'>\n            {elements}\n        </TransitionGroup>\n    )\n}\n\nexport default HeroesList;"]},"metadata":{},"sourceType":"module"}