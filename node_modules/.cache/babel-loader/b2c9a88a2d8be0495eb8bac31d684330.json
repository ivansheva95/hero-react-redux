{"ast":null,"code":"var _jsxFileName = \"/Users/ivan/Desktop/web/hero_admin_panel_template/src/components/heroesList/HeroesList.js\",\n    _s = $RefreshSig$();\n\nimport { useHttp } from '../../hooks/http.hook';\nimport { useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\nimport { heroesFetching, heroesFetched, heroesFetchingError, heroDeleted } from '../../actions';\nimport HeroesListItem from \"../heroesListItem/HeroesListItem\";\nimport Spinner from '../spinner/Spinner';\nimport './heroList.scss'; // Задача для этого компонента:\n// При клике на \"крестик\" идет удаление персонажа из общего состояния\n// Усложненная задача:\n// Удаление идет и с json файла при помощи метода DELETE\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst HeroesList = () => {\n  _s();\n\n  const filteredHeroes = useSelector(state => {\n    if (state.activeFilter === 'all') {\n      return state.heroes.heroes;\n    } else {\n      return state.heroes.heroes.filter(hero => hero.element === state.activeFilter);\n    }\n  });\n  const {\n    heroesLoadingStatus\n  } = useSelector(state => state.heroesLoadingStatus);\n  const dispatch = useDispatch();\n  const {\n    request\n  } = useHttp();\n  useEffect(() => {\n    dispatch(heroesFetching());\n    request(\"http://localhost:3001/heroes\").then(data => dispatch(heroesFetched(data))).catch(() => dispatch(heroesFetchingError())); // eslint-disable-next-line\n  }, []);\n  const onDelete = useCallback(id => {\n    request(`http://localhost:3001/heroes/${id}`, 'DELETE').then(data => console.log(data, 'deleted')).then(dispatch(heroDeleted(id))).catch(err => console.log(err));\n  }, [request]);\n\n  if (heroesLoadingStatus === \"loading\") {\n    return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 16\n    }, this);\n  } else if (heroesLoadingStatus === \"error\") {\n    return /*#__PURE__*/_jsxDEV(\"h5\", {\n      className: \"text-center mt-5\",\n      children: \"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 16\n    }, this);\n  }\n\n  const renderHeroesList = arr => {\n    if (arr.length === 0) {\n      return /*#__PURE__*/_jsxDEV(CSSTransition, {\n        timeout: 0,\n        classNames: \"hero\",\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"text-center mt-5\",\n          children: \"\\u0413\\u0435\\u0440\\u043E\\u0435\\u0432 \\u043F\\u043E\\u043A\\u0430 \\u043D\\u0435\\u0442\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this);\n    }\n\n    return arr.map(({\n      id,\n      ...props\n    }) => {\n      return /*#__PURE__*/_jsxDEV(CSSTransition, {\n        timeout: 500,\n        classNames: \"hero\",\n        children: /*#__PURE__*/_jsxDEV(HeroesListItem, { ...props,\n          onDelete: () => onDelete(id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this)\n      }, id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this);\n    });\n  };\n\n  const elements = renderHeroesList(filteredHeroes);\n  return /*#__PURE__*/_jsxDEV(TransitionGroup, {\n    component: \"ul\",\n    children: elements\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n};\n\n_s(HeroesList, \"CZ89vplDhS/RFCaDjByhNFkHvgo=\", false, function () {\n  return [useSelector, useSelector, useDispatch, useHttp];\n});\n\n_c = HeroesList;\nexport default HeroesList;\n\nvar _c;\n\n$RefreshReg$(_c, \"HeroesList\");","map":{"version":3,"sources":["/Users/ivan/Desktop/web/hero_admin_panel_template/src/components/heroesList/HeroesList.js"],"names":["useHttp","useCallback","useEffect","useDispatch","useSelector","CSSTransition","TransitionGroup","heroesFetching","heroesFetched","heroesFetchingError","heroDeleted","HeroesListItem","Spinner","HeroesList","filteredHeroes","state","activeFilter","heroes","filter","hero","element","heroesLoadingStatus","dispatch","request","then","data","catch","onDelete","id","console","log","err","renderHeroesList","arr","length","map","props","elements"],"mappings":"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","sourcesContent":["import {useHttp} from '../../hooks/http.hook';\nimport { useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\n\nimport { heroesFetching, heroesFetched, heroesFetchingError, heroDeleted } from '../../actions';\nimport HeroesListItem from \"../heroesListItem/HeroesListItem\";\nimport Spinner from '../spinner/Spinner';\n\n\nimport './heroList.scss'\n// Задача для этого компонента:\n// При клике на \"крестик\" идет удаление персонажа из общего состояния\n// Усложненная задача:\n// Удаление идет и с json файла при помощи метода DELETE\n\nconst HeroesList = () => {\n\n    const filteredHeroes = useSelector(state => {\n        if(state.activeFilter === 'all') {\n            return state.heroes.heroes\n        } else {\n            return state.heroes.heroes.filter(hero => hero.element === state.activeFilter)\n        }\n    })\n    const {heroesLoadingStatus} = useSelector(state => state.heroesLoadingStatus);\n    const dispatch = useDispatch();\n    const {request} = useHttp();\n\n    useEffect(() => {\n        dispatch(heroesFetching());\n        request(\"http://localhost:3001/heroes\")\n            .then(data => dispatch(heroesFetched(data)))\n            .catch(() => dispatch(heroesFetchingError()))\n\n        // eslint-disable-next-line\n    }, []);\n\n    const onDelete = useCallback((id) => {\n        request(`http://localhost:3001/heroes/${id}`, 'DELETE')\n            .then(data => console.log(data, 'deleted'))\n            .then(dispatch(heroDeleted(id)))\n            .catch(err => console.log(err))\n    }, [request])\n\n    if (heroesLoadingStatus === \"loading\") {\n        return <Spinner/>;\n    } else if (heroesLoadingStatus === \"error\") {\n        return <h5 className=\"text-center mt-5\">Ошибка загрузки</h5>\n    }\n\n    const renderHeroesList = (arr) => {\n        if (arr.length === 0) {\n            return (\n                <CSSTransition\n                    timeout={0}\n                    classNames='hero'>\n                    <h5 className=\"text-center mt-5\">Героев пока нет</h5>\n                </CSSTransition>\n            )\n        }\n\n        return arr.map(({id, ...props}) => {\n            return (\n                <CSSTransition\n                    key={id}\n                    timeout={500}\n                    classNames='hero'>\n                    <HeroesListItem {...props} onDelete={() => onDelete(id)}/>\n                </CSSTransition>\n            )\n        })\n    }\n    const elements = renderHeroesList(filteredHeroes);\n\n    return (\n        <TransitionGroup component='ul'>\n            {elements}\n        </TransitionGroup>\n    )\n}\n\nexport default HeroesList;"]},"metadata":{},"sourceType":"module"}