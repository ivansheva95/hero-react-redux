{"ast":null,"code":"var _jsxFileName = \"/Users/ivan/Desktop/web/hero_admin_panel_template/src/components/heroesList/HeroesList.js\",\n    _s = $RefreshSig$();\n\nimport { useHttp } from '../../hooks/http.hook';\nimport { useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { heroesFetching, heroesFetched, heroesFetchingError, heroDeleted } from '../../actions';\nimport HeroesListItem from \"../heroesListItem/HeroesListItem\";\nimport Spinner from '../spinner/Spinner'; // Задача для этого компонента:\n// При клике на \"крестик\" идет удаление персонажа из общего состояния\n// Усложненная задача:\n// Удаление идет и с json файла при помощи метода DELETE\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst HeroesList = () => {\n  _s();\n\n  const {\n    heroes,\n    heroesLoadingStatus\n  } = useSelector(state => state);\n  const dispatch = useDispatch();\n  const {\n    request\n  } = useHttp();\n  useEffect(() => {\n    dispatch(heroesFetching());\n    request(\"http://localhost:3001/heroes\").then(data => dispatch(heroesFetched(data))).catch(() => dispatch(heroesFetchingError())); // eslint-disable-next-line\n  }, []);\n  const onDelete = useCallback(id => {\n    //dispatch(heroDeleted(id))\n    request(`http://localhost:3001/heroes/${id}`, 'DELETE');\n  }, []);\n\n  if (heroesLoadingStatus === \"loading\") {\n    return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 16\n    }, this);\n  } else if (heroesLoadingStatus === \"error\") {\n    return /*#__PURE__*/_jsxDEV(\"h5\", {\n      className: \"text-center mt-5\",\n      children: \"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 16\n    }, this);\n  }\n\n  const renderHeroesList = arr => {\n    if (arr.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"h5\", {\n        className: \"text-center mt-5\",\n        children: \"\\u0413\\u0435\\u0440\\u043E\\u0435\\u0432 \\u043F\\u043E\\u043A\\u0430 \\u043D\\u0435\\u0442\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 20\n      }, this);\n    }\n\n    return arr.map(({\n      id,\n      ...props\n    }) => {\n      return /*#__PURE__*/_jsxDEV(HeroesListItem, { ...props,\n        onDelete: () => onDelete(id)\n      }, id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 20\n      }, this);\n    });\n  };\n\n  const elements = renderHeroesList(heroes);\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    children: elements\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n};\n\n_s(HeroesList, \"hDecbTfy8Nv6uwHx3KhKbQ4m9vI=\", false, function () {\n  return [useSelector, useDispatch, useHttp];\n});\n\n_c = HeroesList;\nexport default HeroesList;\n\nvar _c;\n\n$RefreshReg$(_c, \"HeroesList\");","map":{"version":3,"sources":["/Users/ivan/Desktop/web/hero_admin_panel_template/src/components/heroesList/HeroesList.js"],"names":["useHttp","useCallback","useEffect","useDispatch","useSelector","heroesFetching","heroesFetched","heroesFetchingError","heroDeleted","HeroesListItem","Spinner","HeroesList","heroes","heroesLoadingStatus","state","dispatch","request","then","data","catch","onDelete","id","renderHeroesList","arr","length","map","props","elements"],"mappings":";;;AAAA,SAAQA,OAAR,QAAsB,uBAAtB;AACA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,OAAvC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AAEA,SAASC,cAAT,EAAyBC,aAAzB,EAAwCC,mBAAxC,EAA6DC,WAA7D,QAAgF,eAAhF;AACA,OAAOC,cAAP,MAA2B,kCAA3B;AACA,OAAOC,OAAP,MAAoB,oBAApB,C,CAEA;AACA;AACA;AACA;;;;AAEA,MAAMC,UAAU,GAAG,MAAM;AAAA;;AACrB,QAAM;AAACC,IAAAA,MAAD;AAASC,IAAAA;AAAT,MAAgCT,WAAW,CAACU,KAAK,IAAIA,KAAV,CAAjD;AACA,QAAMC,QAAQ,GAAGZ,WAAW,EAA5B;AACA,QAAM;AAACa,IAAAA;AAAD,MAAYhB,OAAO,EAAzB;AAEAE,EAAAA,SAAS,CAAC,MAAM;AACZa,IAAAA,QAAQ,CAACV,cAAc,EAAf,CAAR;AACAW,IAAAA,OAAO,CAAC,8BAAD,CAAP,CACKC,IADL,CACUC,IAAI,IAAIH,QAAQ,CAACT,aAAa,CAACY,IAAD,CAAd,CAD1B,EAEKC,KAFL,CAEW,MAAMJ,QAAQ,CAACR,mBAAmB,EAApB,CAFzB,EAFY,CAMZ;AACH,GAPQ,EAON,EAPM,CAAT;AASA,QAAMa,QAAQ,GAAGnB,WAAW,CAAEoB,EAAD,IAAQ;AACjC;AACAL,IAAAA,OAAO,CAAE,gCAA+BK,EAAG,EAApC,EAAuC,QAAvC,CAAP;AACH,GAH2B,EAGzB,EAHyB,CAA5B;;AAKA,MAAIR,mBAAmB,KAAK,SAA5B,EAAuC;AACnC,wBAAO,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,YAAP;AACH,GAFD,MAEO,IAAIA,mBAAmB,KAAK,OAA5B,EAAqC;AACxC,wBAAO;AAAI,MAAA,SAAS,EAAC,kBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;;AAED,QAAMS,gBAAgB,GAAIC,GAAD,IAAS;AAC9B,QAAIA,GAAG,CAACC,MAAJ,KAAe,CAAnB,EAAsB;AAClB,0BAAO;AAAI,QAAA,SAAS,EAAC,kBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAP;AACH;;AAED,WAAOD,GAAG,CAACE,GAAJ,CAAQ,CAAC;AAACJ,MAAAA,EAAD;AAAK,SAAGK;AAAR,KAAD,KAAoB;AAC/B,0BAAO,QAAC,cAAD,OAA6BA,KAA7B;AAAoC,QAAA,QAAQ,EAAE,MAAMN,QAAQ,CAACC,EAAD;AAA5D,SAAqBA,EAArB;AAAA;AAAA;AAAA;AAAA,cAAP;AACH,KAFM,CAAP;AAGH,GARD;;AAUA,QAAMM,QAAQ,GAAGL,gBAAgB,CAACV,MAAD,CAAjC;AACA,sBACI;AAAA,cACKe;AADL;AAAA;AAAA;AAAA;AAAA,UADJ;AAKH,CAzCD;;GAAMhB,U;UACoCP,W,EACrBD,W,EACCH,O;;;KAHhBW,U;AA2CN,eAAeA,UAAf","sourcesContent":["import {useHttp} from '../../hooks/http.hook';\nimport { useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { heroesFetching, heroesFetched, heroesFetchingError, heroDeleted } from '../../actions';\nimport HeroesListItem from \"../heroesListItem/HeroesListItem\";\nimport Spinner from '../spinner/Spinner';\n\n// Задача для этого компонента:\n// При клике на \"крестик\" идет удаление персонажа из общего состояния\n// Усложненная задача:\n// Удаление идет и с json файла при помощи метода DELETE\n\nconst HeroesList = () => {\n    const {heroes, heroesLoadingStatus} = useSelector(state => state);\n    const dispatch = useDispatch();\n    const {request} = useHttp();\n\n    useEffect(() => {\n        dispatch(heroesFetching());\n        request(\"http://localhost:3001/heroes\")\n            .then(data => dispatch(heroesFetched(data)))\n            .catch(() => dispatch(heroesFetchingError()))\n\n        // eslint-disable-next-line\n    }, []);\n\n    const onDelete = useCallback((id) => {\n        //dispatch(heroDeleted(id))\n        request(`http://localhost:3001/heroes/${id}`, 'DELETE')\n    }, [])\n\n    if (heroesLoadingStatus === \"loading\") {\n        return <Spinner/>;\n    } else if (heroesLoadingStatus === \"error\") {\n        return <h5 className=\"text-center mt-5\">Ошибка загрузки</h5>\n    }\n\n    const renderHeroesList = (arr) => {\n        if (arr.length === 0) {\n            return <h5 className=\"text-center mt-5\">Героев пока нет</h5>\n        }\n\n        return arr.map(({id, ...props}) => {\n            return <HeroesListItem key={id} {...props} onDelete={() => onDelete(id)}/>\n        })\n    }\n\n    const elements = renderHeroesList(heroes);\n    return (\n        <ul>\n            {elements}\n        </ul>\n    )\n}\n\nexport default HeroesList;"]},"metadata":{},"sourceType":"module"}